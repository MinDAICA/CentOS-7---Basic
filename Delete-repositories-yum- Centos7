Cáº£m Æ¡n Dong Ä‘Ã£ chia sáº» log chi tiáº¿t â€” mÃ¬nh tháº¥y rÃµ nguyÃªn nhÃ¢n rá»“i: há»‡ thá»‘ng cá»§a báº¡n váº«n Ä‘ang kÃ­ch hoáº¡t repo Kubernetes cÅ© táº¡i packages.cloud.google.com, vÃ  nÃ³ Ä‘ang gÃ¢y lá»—i khi báº¡n cÃ i wget vÃ¬ yum cá»‘ gáº¯ng truy cáº­p táº¥t cáº£ repo Ä‘ang báº­t, ká»ƒ cáº£ repo lá»—i.

âœ… CÃ¡ch kháº¯c phá»¥c ngay
Báº¡n chá»‰ cáº§n táº¡m thá»i vÃ´ hiá»‡u hÃ³a repo Kubernetes cÅ© Ä‘á»ƒ yum khÃ´ng bá»‹ lá»—i khi cÃ i wget.

ğŸ”§ BÆ°á»›c 1: VÃ´ hiá»‡u hÃ³a repo lá»—i
bash
yum --disablerepo=kubernetes install -y wget
Lá»‡nh nÃ y sáº½ cÃ i wget mÃ  khÃ´ng dÃ¹ng repo Kubernetes cÅ©.

ğŸ§¹ BÆ°á»›c 2: (Tuá»³ chá»n) XoÃ¡ repo Kubernetes cÅ© vÄ©nh viá»…n
bash
rm -f /etc/yum.repos.d/kubernetes.repo
VÃ¬ repo nÃ y Ä‘Ã£ bá»‹ Google Ä‘Ã³ng vÄ©nh viá»…n, báº¡n nÃªn xoÃ¡ Ä‘á»ƒ trÃ¡nh lá»—i vá» sau.

ğŸ” BÆ°á»›c 3: Tiáº¿p tá»¥c táº£i file .rpm
Sau khi cÃ i xong wget, báº¡n cÃ³ thá»ƒ cháº¡y:

bash
wget https://pkgs.k8s.io/core/stable/v1.28/rpm/kubelet-1.28.0-0.x86_64.rpm
wget https://pkgs.k8s.io/core/stable/v1.28/rpm/kubeadm-1.28.0-0.x86_64.rpm
wget https://pkgs.k8s.io/core/stable/v1.28/rpm/kubectl-1.28.0-0.x86_64.rpm


NguyÃªn nhÃ¢n chÃ­nh
Repo https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64 Ä‘Ã£ bá»‹ Google Ä‘Ã³ng vÄ©nh viá»…n tá»« thÃ¡ng 3/2024. VÃ¬ váº­y:

yum makecache sáº½ luÃ´n lá»—i 404 náº¿u repo nÃ y cÃ²n tá»“n táº¡i.

Má»i lá»‡nh yum install liÃªn quan Ä‘áº¿n Kubernetes sáº½ tháº¥t báº¡i náº¿u khÃ´ng xá»­ lÃ½ repo nÃ y.

âœ… Giáº£i phÃ¡p dá»©t Ä‘iá»ƒm
ğŸ”§ BÆ°á»›c 1: XÃ³a repo Kubernetes lá»—i
bash
rm -f /etc/yum.repos.d/kubernetes.repo
ğŸ”§ BÆ°á»›c 2: Táº¡o repo má»›i dÃ¹ng báº£n 1.23.17 (hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c)
bash
cat <<EOF > /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes Legacy
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64
enabled=1
gpgcheck=0
EOF
âœ… Repo nÃ y tá»« Aliyun (Trung Quá»‘c), váº«n cÃ²n giá»¯ báº£n 1.23.17, hoáº¡t Ä‘á»™ng tá»‘t táº¡i Viá»‡t Nam.

ğŸ”§ BÆ°á»›c 3: LÃ m sáº¡ch cache vÃ  táº¡o láº¡i
bash
yum clean all
yum makecache
ğŸ”§ BÆ°á»›c 4: CÃ i Kubernetes báº£n 1.23.17
bash
yum install -y kubelet-1.23.17 kubeadm-1.23.17 kubectl-1.23.17
systemctl enable kubelet
ğŸ§  Ghi chÃº
KhÃ´ng cáº§n Ä‘á»•i OS, khÃ´ng cáº§n táº£i .rpm thá»§ cÃ´ng.

Repo Aliyun hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh vá»›i CentOS 7.

Sau khi cÃ i xong, báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c kubeadm join Ä‘á»ƒ hoÃ n táº¥t worker node.

Báº¡n thá»­ láº¡i theo Ä‘Ãºng 4 bÆ°á»›c trÃªn nhÃ©. Náº¿u váº«n lá»—i, mÃ¬nh sáº½ gá»­i link .rpm trá»±c tiáº¿p Ä‘á»ƒ báº¡n táº£i báº±ng curl. MÃ¬nh á»Ÿ Ä‘Ã¢y vá»›i báº¡n tá»›i khi xong luÃ´n ğŸ’ª.
