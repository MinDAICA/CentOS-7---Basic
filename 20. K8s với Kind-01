
Cần cài kubectl trước hoặc song song với Kind.
Thứ tự hợp lý:
  Cài Docker
  Cài Kind
  Cài kubectl
  Tạo cluster bằng Kind → dùng kubectl để quản lý.
<<---Chi Tiết Tưng Bước --->>

🛠️ Hướng dẫn cài Docker + Kind + kubectl trên CentOS 7
1. Cập nhật hệ thống
bash
sudo yum update -y
👉 Đảm bảo hệ thống có các gói mới nhất.

2. Cài Docker CE
Kind cần Docker để chạy node Kubernetes dưới dạng container.

bash
# Cài công cụ quản lý repo
sudo yum install -y yum-utils device-mapper-persistent-data lvm2

# Thêm repo Docker chính thức
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# Cài Docker CE
sudo yum install -y docker-ce docker-ce-cli containerd.io

# Khởi động Docker và bật tự động chạy khi boot
sudo systemctl enable --now docker

# Kiểm tra
docker --version
👉 Nếu muốn chạy Docker không cần sudo:

bash
sudo usermod -aG docker $USER
newgrp docker
3. Cài Kind
Kind là công cụ tạo cluster Kubernetes trong Docker.

bash
# Tải Kind binary
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.23.0/kind-linux-amd64

# Cấp quyền thực thi
chmod +x ./kind

# Di chuyển vào /usr/local/bin
sudo mv ./kind /usr/local/bin/kind

# Kiểm tra
kind version
4. Cài kubectl
kubectl là công cụ CLI để quản lý cluster.

bash
# Tải kubectl stable
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"

# Cấp quyền thực thi
chmod +x kubectl

# Di chuyển vào /usr/local/bin
sudo mv kubectl /usr/local/bin/kubectl

# Kiểm tra
kubectl version --client
5. Tạo cluster thử nghiệm
bash
kind create cluster --name demo
👉 Kind sẽ tạo 1 container control‑plane và tự động thêm context vào ~/.kube/config.

Kiểm tra:

bash
kubectl get nodes
Nếu thấy node kind-control-plane ở trạng thái Ready → thành công 🎉.

6. Xóa cluster khi không cần
bash
kind delete cluster --name demo

<<------>>

--> Thực hiện <---
[root@192 ~]# # Cài công cụ quản lý repo
[root@192 ~]# sudo yum install -y yum-utils device-mapper-persistent-data lvm2
# Kiểm tra
docker --version
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * epel: d2lzkl7pfhq30w.cloudfront.net
Package device-mapper-persistent-data-0.8.5-3.el7_9.2.x86_64 already installed and latest version
Package 7:lvm2-2.02.187-6.el7_9.5.x86_64 already installed and latest version
Resolving Dependencies
--> Running transaction check
---> Package yum-utils.noarch 0:1.1.31-54.el7_8 will be installed
--> Processing Dependency: python-kitchen for package: yum-utils-1.1.31-54.el7_8.noarch
--> Processing Dependency: libxml2-python for package: yum-utils-1.1.31-54.el7_8.noarch
--> Running transaction check
---> Package libxml2-python.x86_64 0:2.9.1-6.el7_9.6 will be installed
---> Package python-kitchen.noarch 0:1.1.1-5.el7 will be installed
--> Processing Dependency: python-chardet for package: python-kitchen-1.1.1-5.el7.noarch
--> Running transaction check
---> Package python-chardet.noarch 0:2.2.1-3.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

=======================================================================================================================================================================================================
 Package                                            Arch                                       Version                                               Repository                                   Size
=======================================================================================================================================================================================================
Installing:
 yum-utils                                          noarch                                     1.1.31-54.el7_8                                       base                                        122 k
Installing for dependencies:
 libxml2-python                                     x86_64                                     2.9.1-6.el7_9.6                                       updates                                     247 k
 python-chardet                                     noarch                                     2.2.1-3.el7                                           base                                        227 k
 python-kitchen                                     noarch                                     1.1.1-5.el7                                           base                                        267 k

Transaction Summary
=======================================================================================================================================================================================================
Install  1 Package (+3 Dependent packages)

Total download size: 863 k
Installed size: 4.3 M
Downloading packages:
(1/4): libxml2-python-2.9.1-6.el7_9.6.x86_64.rpm                                                                                                                                | 247 kB  00:00:01
(2/4): python-chardet-2.2.1-3.el7.noarch.rpm                                                                                                                                    | 227 kB  00:00:02
(3/4): yum-utils-1.1.31-54.el7_8.noarch.rpm                                                                                                                                     | 122 kB  00:00:00
(4/4): python-kitchen-1.1.1-5.el7.noarch.rpm                                                                                                                                    | 267 kB  00:00:03
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                                                  253 kB/s | 863 kB  00:00:03
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : python-chardet-2.2.1-3.el7.noarch                                                                                                                                                   1/4
  Installing : python-kitchen-1.1.1-5.el7.noarch                                                                                                                                                   2/4
  Installing : libxml2-python-2.9.1-6.el7_9.6.x86_64                                                                                                                                               3/4
  Installing : yum-utils-1.1.31-54.el7_8.noarch                                                                                                                                                    4/4
  Verifying  : python-kitchen-1.1.1-5.el7.noarch                                                                                                                                                   1/4
  Verifying  : yum-utils-1.1.31-54.el7_8.noarch                                                                                                                                                    2/4
  Verifying  : libxml2-python-2.9.1-6.el7_9.6.x86_64                                                                                                                                               3/4
  Verifying  : python-chardet-2.2.1-3.el7.noarch                                                                                                                                                   4/4

Installed:
  yum-utils.noarch 0:1.1.31-54.el7_8

Dependency Installed:
  libxml2-python.x86_64 0:2.9.1-6.el7_9.6                             python-chardet.noarch 0:2.2.1-3.el7                             python-kitchen.noarch 0:1.1.1-5.el7

Complete!
[root@192 ~]#
[root@192 ~]# # Thêm repo Docker chính thức
[root@192 ~]# sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
Loaded plugins: fastestmirror
adding repo from: https://download.docker.com/linux/centos/docker-ce.repo
grabbing file https://download.docker.com/linux/centos/docker-ce.repo to /etc/yum.repos.d/docker-ce.repo
repo saved to /etc/yum.repos.d/docker-ce.repo
[root@192 ~]#
[root@192 ~]# # Cài Docker CE
[root@192 ~]# sudo yum install -y docker-ce docker-ce-cli containerd.io
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * epel: d2lzkl7pfhq30w.cloudfront.net
docker-ce-stable                                                                                                                                                                | 3.5 kB  00:00:00
(1/2): docker-ce-stable/7/x86_64/primary_db                                                                                                                                     | 152 kB  00:00:00
(2/2): docker-ce-stable/7/x86_64/updateinfo                                                                                                                                     |   55 B  00:00:02
Resolving Dependencies
--> Running transaction check
---> Package containerd.io.x86_64 0:1.6.33-3.1.el7 will be installed
--> Processing Dependency: container-selinux >= 2:2.74 for package: containerd.io-1.6.33-3.1.el7.x86_64
---> Package docker-ce.x86_64 3:26.1.4-1.el7 will be installed
--> Processing Dependency: docker-ce-rootless-extras for package: 3:docker-ce-26.1.4-1.el7.x86_64
--> Processing Dependency: libcgroup for package: 3:docker-ce-26.1.4-1.el7.x86_64
---> Package docker-ce-cli.x86_64 1:26.1.4-1.el7 will be installed
--> Processing Dependency: docker-buildx-plugin for package: 1:docker-ce-cli-26.1.4-1.el7.x86_64
--> Processing Dependency: docker-compose-plugin for package: 1:docker-ce-cli-26.1.4-1.el7.x86_64
--> Running transaction check
---> Package container-selinux.noarch 2:2.119.2-1.911c772.el7_8 will be installed
--> Processing Dependency: policycoreutils-python for package: 2:container-selinux-2.119.2-1.911c772.el7_8.noarch
---> Package docker-buildx-plugin.x86_64 0:0.14.1-1.el7 will be installed
---> Package docker-ce-rootless-extras.x86_64 0:26.1.4-1.el7 will be installed
--> Processing Dependency: fuse-overlayfs >= 0.7 for package: docker-ce-rootless-extras-26.1.4-1.el7.x86_64
--> Processing Dependency: slirp4netns >= 0.4 for package: docker-ce-rootless-extras-26.1.4-1.el7.x86_64
---> Package docker-compose-plugin.x86_64 0:2.27.1-1.el7 will be installed
---> Package libcgroup.x86_64 0:0.41-21.el7 will be installed
--> Running transaction check
---> Package fuse-overlayfs.x86_64 0:0.7.2-6.el7_8 will be installed
--> Processing Dependency: libfuse3.so.3(FUSE_3.2)(64bit) for package: fuse-overlayfs-0.7.2-6.el7_8.x86_64
--> Processing Dependency: libfuse3.so.3(FUSE_3.0)(64bit) for package: fuse-overlayfs-0.7.2-6.el7_8.x86_64
--> Processing Dependency: libfuse3.so.3()(64bit) for package: fuse-overlayfs-0.7.2-6.el7_8.x86_64
---> Package policycoreutils-python.x86_64 0:2.5-34.el7 will be installed
--> Processing Dependency: setools-libs >= 3.3.8-4 for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libsemanage-python >= 2.5-14 for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: audit-libs-python >= 2.1.3-4 for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: python-IPy for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libqpol.so.1(VERS_1.4)(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libqpol.so.1(VERS_1.2)(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libapol.so.4(VERS_4.0)(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: checkpolicy for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libqpol.so.1()(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
--> Processing Dependency: libapol.so.4()(64bit) for package: policycoreutils-python-2.5-34.el7.x86_64
---> Package slirp4netns.x86_64 0:0.4.3-4.el7_8 will be installed
--> Running transaction check
---> Package audit-libs-python.x86_64 0:2.8.5-4.el7 will be installed
---> Package checkpolicy.x86_64 0:2.5-8.el7 will be installed
---> Package fuse3-libs.x86_64 0:3.6.1-4.el7 will be installed
---> Package libsemanage-python.x86_64 0:2.5-14.el7 will be installed
---> Package python-IPy.noarch 0:0.75-6.el7 will be installed
---> Package setools-libs.x86_64 0:3.3.8-4.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

=======================================================================================================================================================================================================
 Package                                                Arch                                Version                                                Repository                                     Size
=======================================================================================================================================================================================================
Installing:
 containerd.io                                          x86_64                              1.6.33-3.1.el7                                         docker-ce-stable                               35 M
 docker-ce                                              x86_64                              3:26.1.4-1.el7                                         docker-ce-stable                               27 M
 docker-ce-cli                                          x86_64                              1:26.1.4-1.el7                                         docker-ce-stable                               15 M
Installing for dependencies:
 audit-libs-python                                      x86_64                              2.8.5-4.el7                                            base                                           76 k
 checkpolicy                                            x86_64                              2.5-8.el7                                              base                                          295 k
 container-selinux                                      noarch                              2:2.119.2-1.911c772.el7_8                              extras                                         40 k
 docker-buildx-plugin                                   x86_64                              0.14.1-1.el7                                           docker-ce-stable                               14 M
 docker-ce-rootless-extras                              x86_64                              26.1.4-1.el7                                           docker-ce-stable                              9.4 M
 docker-compose-plugin                                  x86_64                              2.27.1-1.el7                                           docker-ce-stable                               13 M
 fuse-overlayfs                                         x86_64                              0.7.2-6.el7_8                                          extras                                         54 k
 fuse3-libs                                             x86_64                              3.6.1-4.el7                                            extras                                         82 k
 libcgroup                                              x86_64                              0.41-21.el7                                            base                                           66 k
 libsemanage-python                                     x86_64                              2.5-14.el7                                             base                                          113 k
 policycoreutils-python                                 x86_64                              2.5-34.el7                                             base                                          457 k
 python-IPy                                             noarch                              0.75-6.el7                                             base                                           32 k
 setools-libs                                           x86_64                              3.3.8-4.el7                                            base                                          620 k
 slirp4netns                                            x86_64                              0.4.3-4.el7_8                                          extras                                         81 k

Transaction Summary
=======================================================================================================================================================================================================
Install  3 Packages (+14 Dependent packages)

Total download size: 116 M
Installed size: 407 M
Downloading packages:
(1/17): audit-libs-python-2.8.5-4.el7.x86_64.rpm                                                                                                                                |  76 kB  00:00:01
(2/17): container-selinux-2.119.2-1.911c772.el7_8.noarch.rpm                                                                                                                    |  40 kB  00:00:00
(3/17): checkpolicy-2.5-8.el7.x86_64.rpm                                                                                                                                        | 295 kB  00:00:02
warning: /var/cache/yum/x86_64/7/docker-ce-stable/packages/docker-buildx-plugin-0.14.1-1.el7.x86_64.rpm: Header V4 RSA/SHA512 Signature, key ID 621e9f35: NOKEY      ] 1.4 MB/s |  36 MB  00:00:56 ETA
Public key for docker-buildx-plugin-0.14.1-1.el7.x86_64.rpm is not installed
(4/17): docker-buildx-plugin-0.14.1-1.el7.x86_64.rpm                                                                                                                            |  14 MB  00:00:24
(5/17): docker-ce-26.1.4-1.el7.x86_64.rpm                                                                                                                                       |  27 MB  00:00:23
(6/17): containerd.io-1.6.33-3.1.el7.x86_64.rpm                                                                                                                                 |  35 MB  00:00:52
(7/17): docker-ce-rootless-extras-26.1.4-1.el7.x86_64.rpm                                                                                                                       | 9.4 MB  00:00:20
(8/17): fuse-overlayfs-0.7.2-6.el7_8.x86_64.rpm                                                                                                                                 |  54 kB  00:00:00
(9/17): libsemanage-python-2.5-14.el7.x86_64.rpm                                                                                                                                | 113 kB  00:00:00
(10/17): policycoreutils-python-2.5-34.el7.x86_64.rpm                                                                                                                           | 457 kB  00:00:01
(11/17): python-IPy-0.75-6.el7.noarch.rpm                                                                                                                                       |  32 kB  00:00:00
(12/17): libcgroup-0.41-21.el7.x86_64.rpm                                                                                                                                       |  66 kB  00:00:03
(13/17): setools-libs-3.3.8-4.el7.x86_64.rpm                                                                                                                                    | 620 kB  00:00:01
(14/17): slirp4netns-0.4.3-4.el7_8.x86_64.rpm                                                                                                                                   |  81 kB  00:00:00
(15/17): docker-ce-cli-26.1.4-1.el7.x86_64.rpm                                                                                                                                  |  15 MB  00:00:32
(16/17): fuse3-libs-3.6.1-4.el7.x86_64.rpm                                                                                                                                      |  82 kB  00:00:13
(17/17): docker-compose-plugin-2.27.1-1.el7.x86_64.rpm                                                                                                                          |  13 MB  00:00:17
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                                                  1.3 MB/s | 116 MB  00:01:30
Retrieving key from https://download.docker.com/linux/centos/gpg
Importing GPG key 0x621E9F35:
 Userid     : "Docker Release (CE rpm) <docker@docker.com>"
 Fingerprint: 060a 61c5 1b55 8a7f 742b 77aa c52f eb6b 621e 9f35
 From       : https://download.docker.com/linux/centos/gpg
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : libcgroup-0.41-21.el7.x86_64                                                                                                                                                       1/17
  Installing : setools-libs-3.3.8-4.el7.x86_64                                                                                                                                                    2/17
  Installing : audit-libs-python-2.8.5-4.el7.x86_64                                                                                                                                               3/17
  Installing : slirp4netns-0.4.3-4.el7_8.x86_64                                                                                                                                                   4/17
  Installing : libsemanage-python-2.5-14.el7.x86_64                                                                                                                                               5/17
  Installing : python-IPy-0.75-6.el7.noarch                                                                                                                                                       6/17
  Installing : docker-compose-plugin-2.27.1-1.el7.x86_64                                                                                                                                          7/17
  Installing : fuse3-libs-3.6.1-4.el7.x86_64                                                                                                                                                      8/17
  Installing : fuse-overlayfs-0.7.2-6.el7_8.x86_64                                                                                                                                                9/17
  Installing : checkpolicy-2.5-8.el7.x86_64                                                                                                                                                      10/17
  Installing : policycoreutils-python-2.5-34.el7.x86_64                                                                                                                                          11/17
  Installing : 2:container-selinux-2.119.2-1.911c772.el7_8.noarch                                                                                                                                12/17
  Installing : containerd.io-1.6.33-3.1.el7.x86_64                                                                                                                                               13/17
  Installing : docker-buildx-plugin-0.14.1-1.el7.x86_64                                                                                                                                          14/17
  Installing : 1:docker-ce-cli-26.1.4-1.el7.x86_64                                                                                                                                               15/17
  Installing : docker-ce-rootless-extras-26.1.4-1.el7.x86_64                                                                                                                                     16/17
  Installing : 3:docker-ce-26.1.4-1.el7.x86_64                                                                                                                                                   17/17
  Verifying  : docker-buildx-plugin-0.14.1-1.el7.x86_64                                                                                                                                           1/17
  Verifying  : checkpolicy-2.5-8.el7.x86_64                                                                                                                                                       2/17
  Verifying  : fuse3-libs-3.6.1-4.el7.x86_64                                                                                                                                                      3/17
  Verifying  : docker-compose-plugin-2.27.1-1.el7.x86_64                                                                                                                                          4/17
  Verifying  : python-IPy-0.75-6.el7.noarch                                                                                                                                                       5/17
  Verifying  : fuse-overlayfs-0.7.2-6.el7_8.x86_64                                                                                                                                                6/17
  Verifying  : libsemanage-python-2.5-14.el7.x86_64                                                                                                                                               7/17
  Verifying  : slirp4netns-0.4.3-4.el7_8.x86_64                                                                                                                                                   8/17
  Verifying  : 2:container-selinux-2.119.2-1.911c772.el7_8.noarch                                                                                                                                 9/17
  Verifying  : containerd.io-1.6.33-3.1.el7.x86_64                                                                                                                                               10/17
  Verifying  : 3:docker-ce-26.1.4-1.el7.x86_64                                                                                                                                                   11/17
  Verifying  : policycoreutils-python-2.5-34.el7.x86_64                                                                                                                                          12/17
  Verifying  : docker-ce-rootless-extras-26.1.4-1.el7.x86_64                                                                                                                                     13/17
  Verifying  : audit-libs-python-2.8.5-4.el7.x86_64                                                                                                                                              14/17
  Verifying  : setools-libs-3.3.8-4.el7.x86_64                                                                                                                                                   15/17
  Verifying  : 1:docker-ce-cli-26.1.4-1.el7.x86_64                                                                                                                                               16/17
  Verifying  : libcgroup-0.41-21.el7.x86_64                                                                                                                                                      17/17

Installed:
  containerd.io.x86_64 0:1.6.33-3.1.el7                               docker-ce.x86_64 3:26.1.4-1.el7                               docker-ce-cli.x86_64 1:26.1.4-1.el7

Dependency Installed:
  audit-libs-python.x86_64 0:2.8.5-4.el7             checkpolicy.x86_64 0:2.5-8.el7                 container-selinux.noarch 2:2.119.2-1.911c772.el7_8    docker-buildx-plugin.x86_64 0:0.14.1-1.el7
  docker-ce-rootless-extras.x86_64 0:26.1.4-1.el7    docker-compose-plugin.x86_64 0:2.27.1-1.el7    fuse-overlayfs.x86_64 0:0.7.2-6.el7_8                 fuse3-libs.x86_64 0:3.6.1-4.el7
  libcgroup.x86_64 0:0.41-21.el7                     libsemanage-python.x86_64 0:2.5-14.el7         policycoreutils-python.x86_64 0:2.5-34.el7            python-IPy.noarch 0:0.75-6.el7
  setools-libs.x86_64 0:3.3.8-4.el7                  slirp4netns.x86_64 0:0.4.3-4.el7_8

Complete!
[root@192 ~]#
[root@192 ~]# # Khởi động Docker và bật tự động chạy khi boot
[root@192 ~]# sudo systemctl enable --now docker
Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.
[root@192 ~]#
[root@192 ~]# # Kiểm tra
[root@192 ~]# docker --version
Docker version 26.1.4, build 5650f9b

-->Nếu muốn chạy Docker không cần sudo:
[root@192 ~]# sudo usermod -aG docker $USER
[root@192 ~]# newgrp docker

[root@192 ~]# # Tải Kind binary
[root@192 ~]# curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.23.0/kind-linux-amd64
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    97  100    97    0     0      6      0  0:00:16  0:00:15  0:00:01    21
  0     0    0     0    0     0      0      0 --:--:--  0:00:15 --:--:--     0
100 6381k  100 6381k    0     0   301k      0  0:00:21  0:00:21 --:--:-- 1225k
[root@192 ~]#
[root@192 ~]# # Cấp quyền thực thi
[root@192 ~]# chmod +x ./kind
[root@192 ~]#
[root@192 ~]# # Di chuyển vào /usr/local/bin
[root@192 ~]# sudo mv ./kind /usr/local/bin/kind
[root@192 ~]#
[root@192 ~]# # Kiểm tra
[root@192 ~]# kind version
kind v0.23.0 go1.21.10 linux/amd64
[root@192 ~]#

[root@192 ~]# # Tải kubectl stable
[root@192 ~]# curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"

# Cấp quyền thực thi
chmod +x kubectl

# Di chuyển vào /usr/local/bin
sudo mv kubectl /usr/local/bin/kubectl

# Kiểm tra
kubectl version --client
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   138  100   138    0     0    326      0 --:--:-- --:--:-- --:--:--   326
100 57.7M  100 57.7M    0     0  1239k      0  0:00:47  0:00:47 --:--:-- 1231k
[root@192 ~]#
[root@192 ~]# # Cấp quyền thực thi
[root@192 ~]# chmod +x kubectl
[root@192 ~]#
[root@192 ~]# # Di chuyển vào /usr/local/bin
[root@192 ~]# sudo mv kubectl /usr/local/bin/kubectl
[root@192 ~]#
[root@192 ~]# # Kiểm tra
[root@192 ~]# kubectl version --client
Client Version: v1.34.1
Kustomize Version: v5.7.1


