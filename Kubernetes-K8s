Quy trình cài đặt Kubernetes bằng kubeadm trên CentOS 7, áp dụng cho:
  Master node: 192.168.1.160 – master1160
  Worker node 1: 192.168.1.161 – worker1161
  Worker node 2: 192.168.1.162 – worker1162
Mình cài mỗi VM là một CentOS 7: có tên hostname và IP như trên 
  Trên Master Node1:
  Bước 1: Chuẩn bị hệ thống (trên tất cả các node) bash
    # Đặt hostname
    hostnamectl set-hostname master1160   # hoặc worker1161 / worker1162
    
    # Tắt swap, SELinux, firewall
    swapoff -a
    sed -i '/swap/d' /etc/fstab
    setenforce 0
    sed -i 's/^SELINUX=enforcing$/SELINUX=disabled/' /etc/selinux/config
    systemctl stop firewalld
    systemctl disable firewalld
    
    # Cài chrony và cấu hình mạng
    yum install -y chrony
    systemctl enable chronyd
    systemctl start chronyd
    
    modprobe br_netfilter
    cat <<EOF > /etc/sysctl.d/k8s.conf
    net.bridge.bridge-nf-call-ip6tables = 1
    net.bridge.bridge-nf-call-iptables = 1
    EOF
    sysctl --system
    
    # Thêm vào /etc/hosts
    cat <<EOF >> /etc/hosts
    192.168.1.160 master1160
    192.168.1.161 worker1161
    192.168.1.162 worker1162
    EOF






<----#### Kiểm tra sau khi chạy script chuẩn bị hệ thống ###---->
🔹 1. Kiểm tra hostname
    bash
    hostname
    Kết quả phải là:
    master1160 trên máy Master
    worker1161 hoặc worker1162 trên máy Worker

🔹 2. Kiểm tra swap đã tắt
    bash
    free -m | grep -i swap
    Kết quả phải là 0 ở cột “total”.

🔹 3. Kiểm tra SELinux đã tắt
    bash
    getenforce
    Kết quả phải là Disabled.

🔹 4. Kiểm tra firewall đã tắt
    bash
    systemctl status firewalld
    Kết quả phải là inactive (dead).

🔹 5. Kiểm tra chronyd đang chạy
    bash
    systemctl status chronyd
    Kết quả phải là active (running).

🔹 6. Kiểm tra cấu hình mạng bridge
    bash
    sysctl net.bridge.bridge-nf-call-iptables
    sysctl net.bridge.bridge-nf-call-ip6tables
    Cả hai phải trả về = 1.

🔹 7. Kiểm tra file /etc/hosts
    bash
    cat /etc/hosts
    Phải có dòng:
    
    Code
    192.168.1.160 master1160
    192.168.1.161 worker1161
    192.168.1.162 worker1162
    
