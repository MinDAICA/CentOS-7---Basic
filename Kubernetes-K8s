Quy trÃ¬nh cÃ i Ä‘áº·t Kubernetes báº±ng kubeadm trÃªn CentOS 7, Ã¡p dá»¥ng cho:
  Master node: 192.168.1.160 â€“ master1160
  Worker node 1: 192.168.1.161 â€“ worker1161
  Worker node 2: 192.168.1.162 â€“ worker1162
MÃ¬nh cÃ i má»—i VM lÃ  má»™t CentOS 7: cÃ³ tÃªn hostname vÃ  IP nhÆ° trÃªn 
  TrÃªn Master Node1:
  BÆ°á»›c 1: Chuáº©n bá»‹ há»‡ thá»‘ng (trÃªn táº¥t cáº£ cÃ¡c node) bash
    # Äáº·t hostname
    hostnamectl set-hostname master1160   # hoáº·c worker1161 / worker1162
    
    # Táº¯t swap, SELinux, firewall
    swapoff -a
    sed -i '/swap/d' /etc/fstab
    setenforce 0
    sed -i 's/^SELINUX=enforcing$/SELINUX=disabled/' /etc/selinux/config
    systemctl stop firewalld
    systemctl disable firewalld
    
    # CÃ i chrony vÃ  cáº¥u hÃ¬nh máº¡ng
    yum install -y chrony
    systemctl enable chronyd
    systemctl start chronyd
    
    modprobe br_netfilter
    cat <<EOF > /etc/sysctl.d/k8s.conf
    net.bridge.bridge-nf-call-ip6tables = 1
    net.bridge.bridge-nf-call-iptables = 1
    EOF
    sysctl --system
    
    # ThÃªm vÃ o /etc/hosts
    cat <<EOF >> /etc/hosts
    192.168.1.160 master1160
    192.168.1.161 worker1161
    192.168.1.162 worker1162
    EOF






<----#### Kiá»ƒm tra sau khi cháº¡y script chuáº©n bá»‹ há»‡ thá»‘ng ###---->
ğŸ”¹ 1. Kiá»ƒm tra hostname
    bash
    hostname
    Káº¿t quáº£ pháº£i lÃ :
    master1160 trÃªn mÃ¡y Master
    worker1161 hoáº·c worker1162 trÃªn mÃ¡y Worker

ğŸ”¹ 2. Kiá»ƒm tra swap Ä‘Ã£ táº¯t
    bash
    free -m | grep -i swap
    Káº¿t quáº£ pháº£i lÃ  0 á»Ÿ cá»™t â€œtotalâ€.

ğŸ”¹ 3. Kiá»ƒm tra SELinux Ä‘Ã£ táº¯t
    bash
    getenforce
    Káº¿t quáº£ pháº£i lÃ  Disabled.

ğŸ”¹ 4. Kiá»ƒm tra firewall Ä‘Ã£ táº¯t
    bash
    systemctl status firewalld
    Káº¿t quáº£ pháº£i lÃ  inactive (dead).

ğŸ”¹ 5. Kiá»ƒm tra chronyd Ä‘ang cháº¡y
    bash
    systemctl status chronyd
    Káº¿t quáº£ pháº£i lÃ  active (running).

ğŸ”¹ 6. Kiá»ƒm tra cáº¥u hÃ¬nh máº¡ng bridge
    bash
    sysctl net.bridge.bridge-nf-call-iptables
    sysctl net.bridge.bridge-nf-call-ip6tables
    Cáº£ hai pháº£i tráº£ vá» = 1.

ğŸ”¹ 7. Kiá»ƒm tra file /etc/hosts
    bash
    cat /etc/hosts
    Pháº£i cÃ³ dÃ²ng:
    
    Code
    192.168.1.160 master1160
    192.168.1.161 worker1161
    192.168.1.162 worker1162
    
