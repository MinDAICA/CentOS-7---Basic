Tuy·ªát v·ªùi Dong! D∆∞·ªõi ƒë√¢y l√† to√†n b·ªô n·ªôi dung Dockerfile ho√†n ch·ªânh ƒë·ªÉ b·∫°n copy v√† d√πng ngay. N√≥ s·∫Ω:

D√πng image WordPress chu·∫©n c√≥ PHP 8.2 v√† Apache

C√†i th√™m extension PostgreSQL cho PHP (pdo_pgsql, pgsql)

Copy file db.php v√†o ƒë√∫ng v·ªã tr√≠

Copy to√†n b·ªô th∆∞ m·ª•c plugin PG4WP

üìÑ Dockerfile ho√†n ch·ªânh
Dockerfile
FROM wordpress:php8.2-apache

# C√†i extension PostgreSQL cho PHP
RUN apt-get update && apt-get install -y \
    php8.2-pgsql \
    php8.2-pdo-pgsql \
    && docker-php-ext-enable pgsql pdo_pgsql

# Copy file db.php v√†o wp-content
COPY postgresql-for-wordpress/pg4wp/db.php /var/www/html/wp-content/db.php

# Copy to√†n b·ªô th∆∞ m·ª•c plugin PG4WP
COPY postgresql-for-wordpress/pg4wp /var/www/html/wp-content/plugins/pg4wp
üîÅ C√°c b∆∞·ªõc ti·∫øp theo
Build l·∫°i image:

bash
docker build -t wordpress-pg .
Xo√° pod WordPress hi·ªán t·∫°i:

bash
kubectl delete pod -l app=wordpress -n wordpress
√Åp d·ª•ng l·∫°i wordpress.yaml:

bash
kubectl apply -f wordpress.yaml
üìå ƒê·∫£m b·∫£o file wordpress.yaml c√≥:

yaml
image: wordpress-pg
imagePullPolicy: Never
nodeName: master1160
‚úÖ Ki·ªÉm tra l·∫°i
Sau khi pod ch·∫°y l·∫°i, truy c·∫≠p:

Code
http://192.168.1.161:<NodePort>
‚Üí B·∫°n s·∫Ω th·∫•y giao di·ªán c√†i ƒë·∫∑t WordPress, kh√¥ng c√≤n l·ªói thi·∫øu extension PostgreSQL.
