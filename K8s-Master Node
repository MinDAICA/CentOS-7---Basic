Master Node 
Tuyá»‡t vá»i, báº¡n Ä‘ang á»Ÿ thÆ° má»¥c /root trÃªn CentOS 7 vÃ  muá»‘n cÃ i Ä‘áº·t cá»¥m Kubernetes gá»“m 1 master vÃ  2 worker node. DÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng dáº«n chi tiáº¿t tá»«ng bÆ°á»›c, kÃ¨m giáº£i thÃ­ch rÃµ rÃ ng Ä‘á»ƒ trÃ¡nh lá»—i thÆ°á»ng gáº·p. MÃ¬nh sáº½ chia theo tá»«ng giai Ä‘oáº¡n triá»ƒn khai.

ğŸ§± Giai Ä‘oáº¡n 1: Chuáº©n bá»‹ há»‡ thá»‘ng
ğŸ”§ BÆ°á»›c 1: Äáº·t hostname cho tá»«ng node
TrÃªn má»—i node, cháº¡y:

bash
hostnamectl set-hostname master1160      # TrÃªn master
hostnamectl set-hostname worker1161      # TrÃªn worker 1
hostnamectl set-hostname worker1162      # TrÃªn worker 2
ğŸ”¥ BÆ°á»›c 2: Táº¯t SELinux vÃ  Firewall
bash
sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config
setenforce 0

systemctl stop firewalld
systemctl disable firewalld
ğŸ” SELinux vÃ  firewall cÃ³ thá»ƒ cháº·n cÃ¡c káº¿t ná»‘i ná»™i bá»™ giá»¯a cÃ¡c node, gÃ¢y lá»—i khi khá»Ÿi táº¡o cluster.

ğŸ•°ï¸ BÆ°á»›c 3: Äá»“ng bá»™ thá»i gian
bash
yum -y install chrony
systemctl enable chronyd
systemctl start chronyd
chronyc sources
â±ï¸ Thá»i gian khÃ´ng Ä‘á»“ng bá»™ cÃ³ thá»ƒ gÃ¢y lá»—i khi xÃ¡c thá»±c giá»¯a cÃ¡c node.

ğŸ§¹ BÆ°á»›c 4: Táº¯t swap
bash
swapoff -a
sed -i '/swap/d' /etc/fstab
âš ï¸ Kubernetes yÃªu cáº§u táº¯t swap Ä‘á»ƒ kubelet hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh.

ğŸ³ Giai Ä‘oáº¡n 2: CÃ i Docker
bash
curl -fsSL https://get.docker.com/ | sh
systemctl start docker
systemctl enable docker
ğŸ‹ Docker lÃ  container runtime Ä‘á»ƒ cháº¡y cÃ¡c Pod trong Kubernetes.

ğŸ“¦ Giai Ä‘oáº¡n 3: CÃ i kubeadm, kubelet, kubectl
BÆ°á»›c 1: Táº¡o repo Kubernetes
bash
cat <<EOF > /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\$basearch
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg
       https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
exclude=kubelet kubeadm kubectl
EOF
BÆ°á»›c 2: CÃ i Ä‘áº·t cÃ¡c gÃ³i
bash
yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes
systemctl enable kubelet
ğŸŒ Giai Ä‘oáº¡n 4: Cáº¥u hÃ¬nh máº¡ng vÃ  kernel
bash
modprobe br_netfilter

cat <<EOF > /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF

sysctl --system
ğŸŒ‰ GiÃºp Kubernetes xá»­ lÃ½ traffic giá»¯a cÃ¡c container.

ğŸš€ Giai Ä‘oáº¡n 5: Khá»Ÿi táº¡o Master Node
TrÃªn master1160:

bash
kubeadm init --apiserver-advertise-address=192.168.1.160 --pod-network-cidr=192.168.0.0/16
Sau khi hoÃ n táº¥t, cáº¥u hÃ¬nh kubectl:

bash
mkdir -p $HOME/.kube
cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
chown $(id -u):$(id -g) $HOME/.kube/config
ğŸ§µ Giai Ä‘oáº¡n 6: CÃ i máº¡ng Pod (Calico)
bash
kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml
ğŸ•¸ï¸ Calico giÃºp cÃ¡c Pod giao tiáº¿p vá»›i nhau qua máº¡ng overlay.

ğŸ¤ Giai Ä‘oáº¡n 7: ThÃªm Worker Node
TrÃªn master1160, báº¡n sáº½ nháº­n Ä‘Æ°á»£c lá»‡nh kubeadm join .... Cháº¡y lá»‡nh Ä‘Ã³ trÃªn worker1161 vÃ  worker1162.

VÃ­ dá»¥:

bash
kubeadm join 192.168.1.160:6443 --token abcdef.0123456789abcdef \
    --discovery-token-ca-cert-hash sha256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
âœ… Giai Ä‘oáº¡n 8: Kiá»ƒm tra cluster
TrÃªn master:

bash
kubectl get nodes
Káº¿t quáº£ mong Ä‘á»£i:

Code
NAME         STATUS   ROLES           AGE     VERSION
master1160   Ready    control-plane   XXm     v1.XX.X
worker1161   Ready    <none>          XXm     v1.XX.X
worker1162   Ready    <none>          XXm     v1.XX.X
ğŸ§¯ Má»™t sá»‘ lá»—i thÆ°á»ng gáº·p & cÃ¡ch kháº¯c phá»¥c
Lá»—i thÆ°á»ng gáº·p	NguyÃªn nhÃ¢n	CÃ¡ch kháº¯c phá»¥c
swap is enabled	chÆ°a táº¯t swap	swapoff -a vÃ  sá»­a /etc/fstab
firewalld blocks port	firewall Ä‘ang báº­t	systemctl stop firewalld
token expired	token join háº¿t háº¡n	táº¡o láº¡i báº±ng kubeadm token create --print-join-command
network plugin not working	chÆ°a cÃ i Calico/Flannel	kubectl apply -f calico.yaml
Náº¿u báº¡n muá»‘n mÃ¬nh viáº¿t script tá»± Ä‘á»™ng hÃ³a toÃ n bá»™ quÃ¡ trÃ¬nh nÃ y hoáº·c há»— trá»£ cÃ i Dashboard, Ingress, hoáº·c triá»ƒn khai á»©ng dá»¥ng máº«u, mÃ¬nh cÃ³ thá»ƒ lÃ m ngay. Báº¡n muá»‘n tiáº¿p tá»¥c vá»›i pháº§n nÃ o?&#95;{{{C3ITATION{{{&#95;4{
